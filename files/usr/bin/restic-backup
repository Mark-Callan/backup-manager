#!/usr/bin/env bash

repo_name=${1:?"First positional argument, repo name, is required."}
source_path=${2:?"Second positional argument, source path, is required."}


if [[ ! -d ${source_path} ]]; then
	echo "[ERROR] Source path does not exist"
	exit 1
fi

reponame=`restic-reponame ${repo_name}`

REPOS_PATH=`sudo -u restic cat /data/backups/.restic-repositories`

restictl --repo "${reponame}" --verbose backup ${source_path} ;

